(this["webpackJsonpsample-prep"]=this["webpackJsonpsample-prep"]||[]).push([[0],{346:function(e,t,s){},347:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s(72),a=s.n(n),i=s(152),r=s(358),l=s(357),o=s(2),d=function(){return Object(o.jsx)("div",{className:"w-full fixed top-0 h-min-content",children:Object(o.jsx)(r.a,{attached:"top",children:Object(o.jsx)(r.a.Menu,{position:"right",children:Object(o.jsx)(l.a,{item:!0,icon:"tasks",children:Object(o.jsxs)(l.a.Menu,{children:[Object(o.jsx)(l.a.Item,{children:"Username"}),Object(o.jsx)(l.a.Item,{children:"Change Password"}),Object(o.jsx)(l.a.Item,{children:"Logout"}),Object(o.jsx)(l.a.Item,{children:"Settings"}),Object(o.jsx)(l.a.Item,{children:"Full screen"})]})})})})})},j=Object(c.memo)(d),p=s(361),b=function(){return Object(o.jsx)("div",{className:"pt-4 w-1/3 bg-white m-4 text-center rounded px-4",children:Object(o.jsx)(p.a,{as:"h3",children:"Devices connected"})})},u=Object(c.memo)(b),m=s(110),x=s(26),O=s(91),h=s(92),f={samples:[],currentSample:{},timerMapper:{}},v=Object(O.a)(Object(h.persist)((function(e){return Object(x.a)(Object(x.a)({},f),{},{setSamples:function(t){return e({samples:t})},setCurrentSample:function(t){return e({currentSample:t})},setSampleTimer:function(t,s){return e((function(e){return{timerMapper:Object(x.a)(Object(x.a)({},e.timerMapper),{},Object(m.a)({},t,s))}}))},reduceTimerBySecond:function(t){return e((function(e){return{timerMapper:Object(x.a)(Object(x.a)({},e.timerMapper),{},Object(m.a)({},t,e.timerMapper[t]?e.timerMapper[t]-1:0))}}))}})}),{name:"samples"})),S=s(348),g={hasSamplePreparationStarted:!1,startProcessForSamplePreparation:!1,isScanModalOpen:!1},N=Object(O.a)(Object(h.persist)((function(e){return Object(x.a)(Object(x.a)({},g),{},{setSamplePreparationStarted:function(t){return e({hasSamplePreparationStarted:t})},setStartProcessForSamplePreparation:function(t){return e({startProcessForSamplePreparation:t})},openScanModal:function(t){return e({isScanModalOpen:t})},resetUiState:function(){return e(Object(x.a)({},g))}})}),{name:"ui"})),P=function(e){var t=e.sample,s=e.active,n=v(),a=n.timerMapper,i=n.reduceTimerBySecond,r=N().openScanModal;Object(c.useEffect)((function(){var e=null;return a[t.id]&&(e=setInterval((function(){i(t.id)}),1e3)),function(){return clearInterval(e)}}),[t.id,a,i]);return Object(o.jsxs)("div",{className:"my-4 border",children:[Object(o.jsx)("div",{className:"text-white ".concat(s?"bg-success":"bg-gray-300"," p-1 text-sm font-semibold"),children:t.id}),0!==a[t.id]&&Object(o.jsxs)("div",{className:"p-6",children:["Time elapsed: ",a[t.id]?function(){var e=function(e){var t="".concat(Math.floor(e/3600)),s=e%3600,c="".concat(Math.floor(s/60)),n=s%60,a="".concat(Math.ceil(n));return{h:t.padStart(2,"0"),m:c.padStart(2,"0"),s:a.padStart(2,"0")}}(a[t.id]);return"".concat(e.m,":").concat(e.s)}():"N/A"]}),0===a[t.id]?Object(o.jsx)("div",{className:"py-4",children:Object(o.jsx)(S.a,{size:"mini",positive:!0,onClick:function(){r(!0)},children:"Scan Sample"})}):null]})},y=function(){var e=v(),t=e.samples,s=e.currentSample;return Object(o.jsxs)("div",{className:"pt-4 px-6 bg-white m-4 text-center w-1/3 rounded px-4",children:[Object(o.jsx)(p.a,{as:"h3",children:"Samples"}),s.id&&Object(o.jsx)(P,{sample:s,active:!0}),t.map((function(e,t){return Object(o.jsx)(P,{sample:e},t)}))]})},C=Object(c.memo)(y),I=s(179),k=s(48),M={steps:[{name:"Lysis",steps:[{description:"Open tube 1"},{description:"Open the eNAT tube"},{description:"Collect the sample"},{description:"Close the eNAT tube"},{description:"Close tube 1 with the SmartLid"},{description:"Mix tube 1"},{description:"Capture the beads"},{description:"Dry the beads"},{description:"Insert the smart lid in tube 3"},{description:"Transfer the smart lid to tube 2 Wash"}]},{name:"Wash",steps:[{description:"Mix tube 2"},{description:"Capture the beads"},{description:"Dry the beads"},{description:"Transfer the SmartLid to tube 3"}]},{name:"Elution",steps:[{description:"Mix tube 3"},{description:"Capture the beads"},{description:"Remove the SmartLid"},{description:"Close tube 3"}]},{name:"Cartridge",steps:[{description:"Transfer the smart lid to tube 2 Wash"},{description:"Transfer the smart lid to tube 2 Wash"},{description:"Transfer the smart lid to tube 2 Wash"}]}]},w=M.steps.map((function(e){if(e.steps.length)return e.name})),T={activeStep:0,completedSteps:[0],playbackTimes:0,videoPlaybackPointer:0},F=Object(O.a)(Object(h.persist)((function(e){return Object(x.a)(Object(x.a)({},T),{},{setActiveStep:function(t){return e({activeStep:t})},setCompletedSteps:function(t){return e({completedSteps:t})},setPlaybackTimes:function(t){return e({playbackTimes:t})},setVideoPlaybackPointer:function(t){return e({videoPlaybackPointer:t})},resetPreparationState:function(){return e(Object(x.a)({},T))}})}),{name:"preparation-steps"})),D=s.p+"static/media/output.830fa6e0.mp4",z=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(!1),s=Object(k.a)(t,2),n=s[0],a=s[1],i=F(),r=i.activeStep,l=i.completedSteps,d=i.setPlaybackTimes,j=i.videoPlaybackPointer,p=i.setVideoPlaybackPointer,b=i.setCompletedSteps,u=i.playbackTimes,m=i.setActiveStep,x=i.resetPreparationState,O=N().resetUiState,h=v(),f=h.samples,g=h.currentSample,P=h.setSamples,y=h.setCurrentSample,C=h.setSampleTimer,T=w[r],z=M.steps[r].steps[j].description;Object(c.useEffect)((function(){d(M.steps[r].steps.length-1)}),[d,r]);return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"text-xs text-white bg-success p-2 flex justify-between items-center font-semibold",children:[Object(o.jsx)("div",{children:T}),Object(o.jsx)("div",{children:z}),Object(o.jsx)("div",{children:g.id})]}),Object(o.jsx)("div",{className:"relative",children:Object(o.jsx)("video",{className:"video",controls:!0,ref:e,onEnded:function(){return a(!0)},children:Object(o.jsx)("source",{src:D,type:"video/mp4"})})}),Object(o.jsx)("div",{className:"flex",children:w.map((function(e,t){return Object(o.jsx)("div",{className:"flex-1 text-xs p-1 flex items-center justify-center ".concat(l.includes(t)?"bg-success text-white":"text-success"),children:e},t)}))}),Object(o.jsx)("div",{className:"flex justify-center pt-4",children:Object(o.jsx)(S.a,{size:"mini",positive:!0,onClick:function(){p(j+1),j===u&&(r<w.length-1?(b([].concat(Object(I.a)(l),[r+1])),m(r+1)):(C(g.id,1200),P([].concat(Object(I.a)(f),[g])),y({}),x(),O()),p(0)),e.current.play(),a(!1)},disabled:!n,children:"Next"})})]})},L=Object(c.memo)(z),A=s(356),E=s(228),W=s.n(E),B=s(229),U=s.n(B),J=function(e){var t=e.setStartProcessForSamplePreparation,s=Object(c.useState)(""),n=Object(k.a)(s,2),a=n[0],i=n[1],r=Object(c.useState)(""),l=Object(k.a)(r,2),d=l[0],j=l[1],p=Object(c.useState)(""),b=Object(k.a)(p,2),u=b[0],m=b[1],x=Object(c.useState)(""),O=Object(k.a)(x,2),h=O[0],f=O[1],g=v().setCurrentSample,N=Object(c.useCallback)((function(){var e=W.a.generate();g({id:e})}),[g]),P=Object(c.useCallback)((function(){t(!0),N()}),[t,N]);return console.log(a),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"bg-success text-white p-2 text-left",children:Object(o.jsx)("h4",{className:"text-white font-semibold",children:"Sample Prepataion"})}),Object(o.jsx)("p",{className:"pt-4",children:"Enter the test tracking information by scanning the QR codes, or manually entering the data."}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"flex mt-4",children:[Object(o.jsxs)("div",{className:"m-2 flex flex-col flex-1",children:[Object(o.jsx)("label",{className:"text-xs text-success font-semibold pb-1",children:"Tested ID"}),Object(o.jsx)(A.a,{placeholder:"Tested ID",value:a,onInput:function(e){i(e.target.value)}})]}),Object(o.jsxs)("div",{className:"m-2 flex flex-col flex-1",children:[Object(o.jsx)("label",{className:"text-xs text-success font-semibold pb-1",children:"Sample ID"}),Object(o.jsx)(A.a,{placeholder:"Sample ID",value:d,onInput:function(e){j(e.target.value)}})]})]}),Object(o.jsxs)("div",{className:"flex",children:[Object(o.jsxs)("div",{className:"m-2 flex flex-col flex-1",children:[Object(o.jsx)("label",{className:"text-xs text-success font-semibold pb-1",children:"Prep kit ID"}),Object(o.jsx)(A.a,{placeholder:"Prep kit ID",value:u,onInput:function(e){m(e.target.value)}})]}),Object(o.jsxs)("div",{className:"m-2 flex flex-col flex-1",children:[Object(o.jsx)("label",{className:"text-xs text-success font-semibold pb-1",children:"Cartridge ID"}),Object(o.jsx)(A.a,{placeholder:"Cartridge ID",value:h,onInput:function(e){f(e.target.value)}})]})]})]}),Object(o.jsx)(U.a,{onUpdate:function(e,t){var s=(null===t||void 0===t?void 0:t.text)?JSON.parse(null===t||void 0===t?void 0:t.text):{};(null===s||void 0===s?void 0:s.testId)&&(i(null===s||void 0===s?void 0:s.testId),j(null===s||void 0===s?void 0:s.sampleId),m(null===s||void 0===s?void 0:s.prepKitId),f(null===s||void 0===s?void 0:s.cartridgeId))}}),Object(o.jsxs)("div",{className:"flex my-4 justify-between",children:[Object(o.jsx)(S.a,{size:"mini",children:"Cancel"}),Object(o.jsx)(S.a,{size:"mini",positive:!0,onClick:P,children:"Confirm"})]})]})},R=Object(c.memo)(J),V=s(175),K=s.n(V),Q=s(359),q=function(){var e=N(),t=e.isScanModalOpen,s=e.openScanModal;return Object(o.jsx)(Q.a,{open:t,basic:!0,centered:!0,size:"tiny",children:Object(o.jsxs)("div",{className:"bg-white flex justify-center align-center flex-col max-w-max",children:[Object(o.jsx)("div",{className:"py-4 text-center bg-success",children:"Scan Sample"}),Object(o.jsx)("div",{className:"w-full py-4",children:Object(o.jsx)(K.a,{})}),Object(o.jsxs)("div",{className:"m-auto pb-4",children:[Object(o.jsx)(S.a,{onClick:function(){return s(!1)},basic:!0,size:"tiny",color:"red",children:"Close"}),Object(o.jsx)(S.a,{basic:!0,size:"tiny",positive:!0,children:"Scan"})]})]})})},G=function(){var e=N(),t=e.hasSamplePreparationStarted,s=e.startProcessForSamplePreparation,c=e.setStartProcessForSamplePreparation,n=e.setSamplePreparationStarted;return Object(o.jsxs)("div",{className:"pt-4 bg-white m-4 w-1/2 rounded px-4",children:[Object(o.jsx)(p.a,{as:"h3",className:"text-center",children:"Activity"}),t?s?Object(o.jsx)(L,{}):Object(o.jsx)(R,{setStartProcessForSamplePreparation:c}):Object(o.jsx)("div",{className:"flex justify-center pt-4",children:Object(o.jsx)(S.a,{size:"mini",positive:!0,onClick:function(){n(!0)},children:"Start Sample Preparation"})}),Object(o.jsx)(q,{})]})},H=Object(c.memo)(G),X=function(){return Object(o.jsxs)("div",{className:"flex justify-evenly bg-gray-100 h-full pt-12 min-h-screen",children:[Object(o.jsx)(C,{}),Object(o.jsx)(H,{}),Object(o.jsx)(u,{})]})},Y=Object(c.memo)(X),Z=function(){return Object(o.jsx)(i.a,{children:Object(o.jsx)(i.c,{children:Object(o.jsxs)(i.b,{path:"/",children:[Object(o.jsx)(j,{}),Object(o.jsx)(Y,{})]})})})},$=Object(c.memo)(Z),_=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,363)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),c(e),n(e),a(e),i(e)}))};s(345),s(346);a.a.render(Object(o.jsx)($,{}),document.getElementById("root")),_()}},[[347,1,2]]]);
//# sourceMappingURL=main.bb305336.chunk.js.map